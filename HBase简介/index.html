

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="CodeInterviews">
    
    <meta name="description" itemprop="description" content="HBase简介">
    
    

    
    <link rel="alternative" href="atom.xml" title="CodeInterviews" type="application/atom+xml">
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HBase简介 | CodeInterviews</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script>
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta name="baidu-site-verification" content="Jvgfj1O0oP" />
    <meta name="360-site-verification" content="902348aeb40d156fb32b748c4071c4bd" />
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://codeinterviews.com" title="CodeInterviews">CodeInterviews</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index"><a href="/">首页</a></li>
                    
                    <li id="nav-categories"><a href="/categories">分类</a></li>
                    
                    <li id="nav-tags"><a href="/tags">标签</a></li>
                    
                    <li id="nav-reading"><a href="/tags/#LeetCode">LeetCode</a></li>
                    
                    <li id="nav-labs"><a href="/tags/#Java">Java</a></li>
                    
                    <li id="nav-about"><a href="/tags/#Javascript">Javascript</a></li>
                    

                    <!--<li id="nav-github"><a href="https://github.com/hexo2hexo" target="_blank">GitHub</a></li>-->
                    <li id="nav-rss"><a href="/atom.xml" target="_blank">Rss</a></li>
                    <li id="nav-search"><input type="text" id="search" placeholder="search" /></li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
    var bgRoot = "http://7xkwt1.com1.z0.glb.clouddn.com/background-";
    var bgLength = "74";
    var bgRandom = false;
    var bgImage = "http://7xkwt1.com1.z0.glb.clouddn.com/background-64.jpg";

    $(function() {
        // page-id...
        var pageId = "HBase简介/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";

        $("#nav-" + pageId).addClass("active");
    });
    </script>

    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>HBase简介</h1>

        <div class="time-info">
            
<span class="article-tags">
    
    Tags: <a href="/tags/Hadoop/">Hadoop</a>&nbsp;<a href="/tags/HBase/">HBase</a>&nbsp;
</span>



<span class="article-categories">
    Category:
    <a class="article-category-link" href="/categories/project/">project</a>
</span>


        </div>
        <div class="time-info">
            发表: <time datetime="2016-06-30T03:57:53.000Z"
                       itemprop="datePublished">2016-06-29</time>
            
            更新: <time datetime="2016-06-30T03:57:53.000Z"
                       itemprop="dateModified">2016-06-29</time>
            
        </div>

        <div class="post-body-inner">
            
                <div id="toc" class="toc-article well">
                    <strong class="toc-title">大纲</strong>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#四、HBase数据模型"><span class="toc-number">1.</span> <span class="toc-text">四、HBase数据模型</span></a></li></ol>
                </div>
            

            <p>##一、本节目标</p>
<p>我们本节课程将要讲述以下内容：</p>
<ul>
<li>HBase的概述及历史</li>
<li>HBase的数据模型</li>
<li>HBase的系统架构</li>
</ul>
<a id="more"></a>
<p>##二、HBase概述</p>
<p>HBase是一个开源的非关系型分布式数据库（NoSQL），它参考了谷歌的BigTable建模，实现的编程语言为 Java。它是Apache软件基金会的Hadoop项目的一部分，运行于HDFS文件系统之上，为 Hadoop 提供类似于BigTable 规模的服务，可以存储海量稀疏的数据，并具备一定的容错性、高可靠性及伸缩性。主要应用场景是实时随机读写超大规模的数据。</p>
<p>HBase在列上实现了BigTable论文提到的压缩算法、内存操作和布隆过滤器。HBase的表能够作为MapReduce任务的输入和输出，可以通过Java API来存取数据，也可以通过REST、Avro或者Thrift的API来访问。</p>
<p>HBase不能取代RDBMS，因为二者的应用场景不同。HBase为了解决海量数据的扩展性，支持简单的增加节点来实现线性扩展，从而在集群上管理海量的非结构化或半结构化的稀疏数据。HBase仅能通过主键（row key）或主键的range检索数据，支持单行事务。</p>
<p><img src="http://anything-about-doc.qiniudn.com/hbase/1.jpg" alt="Alt text"></p>
<p>上图描述Hadoop EcoSystem中的各层系统。其中,HBase位于结构化存储层，Hadoop HDFS为HBase提供了高可靠性的底层存储支持，Hadoop MapReduce为HBase提供了高性能的计算能力，Zookeeper为HBase提供了稳定服务和failover机制。</p>
<p>此外，Pig和Hive还为HBase提供了高层语言支持，使得在HBase上进行数据统计处理变的非常简单。 Sqoop则为HBase提供了方便的RDBMS数据导入功能，使得传统数据库数据向HBase中迁移变的非常方便。</p>
<p>##三、HBase历史</p>
<p>Apache HBase最初是Powerset公司为了处理自然语言搜索产生的海量数据而开展的项目。下图展示了HBase的发展历程。</p>
<p><img src="http://anything-about-doc.qiniudn.com/hbase/2.png" alt="Alt text"></p>
<h2 id="四、HBase数据模型"><a href="#四、HBase数据模型" class="headerlink" title="四、HBase数据模型"></a>四、HBase数据模型</h2><p><img src="http://anything-about-doc.qiniudn.com/hbase/3.png" alt="Alt text"></p>
<ul>
<li><strong>行健（Row Key）</strong>：表的主键，表中的记录默认按照行健升序排序</li>
<li><strong>时间戳（Timestamp）</strong>：每次数据操作对应的时间戳，可以看作是数据的版本号</li>
<li><strong>列族（Column Family）</strong>：表在水平方向有一个或者多个列族组成，一个列族中可以由任意多个列组成，列族支持动态扩展，无需预先定义列的数量以及类型，所有列均以二进制格式存储，用户需要自行进行类型转换。所有的列族成员的前缀是相同的，例如“abc:a1”和“abc:a2”两个列都属于abc这个列族。</li>
<li><strong>表和区域（Table&amp;Region）</strong>：当表随着记录数不断增加而变大后，会逐渐分裂成多份，成为区域，一个区域是对表的水平划分，不同的区域会被Master分配给相应的RegionServer进行管理</li>
<li><strong>单元格（Cell）</strong>：表存储数据的单元。由{行健，列（列族:标签），时间戳}唯一确定，其中的数据是没有类型的，以二进制的形式存储。</li>
</ul>
<p>##五、HBase架构</p>
<p><img src="http://anything-about-doc.qiniudn.com/hbase/4.jpg" alt="Alt text"></p>
<p>如上图所示，HBase架构中只有一个Master节点，称HMaster，还有多台RegionServer成为HRegionServer，每个RegionServer包含多个Region。</p>
<ol>
<li>HBase访问接口：Java，REST，Thrift等</li>
<li>Master：集群的管理服务器，为RegionServer分配Region，负责RegionServer的负载均衡，处理schema更新请求</li>
<li>RegionServer：管理HBase的数据存储，维护Region，处理IO请求。</li>
<li>Zookeeper：保证集群的高可用性、存储Region的寻址入口，并实时监控RegionServer的状态，存储HBase的Schema。</li>
</ol>
<p>可以看到，client访问hbase上数据的过程并不需要Master参与（寻址访问Zookeeper和RegionServer，数据读写访问RegionServer），Master仅仅维护Table和Region的元数据信息，负载很低。</p>
<p>##六、HBase访问接口</p>
<ol>
<li>Native Java API，最常规和高效的访问方式，适合Hadoop MapReduce Job并行批处理HBase表数据</li>
<li>HBase Shell，HBase的命令行工具，最简单的接口，适合HBase管理使用</li>
<li>Thrift Gateway，利用Thrift序列化技术，支持C++，PHP，Python等多种语言，适合其他异构系统在线访问HBase表数据</li>
<li>REST Gateway，支持REST 风格的Http API访问HBase, 解除了语言限制</li>
<li>Pig，可以使用Pig Latin流式编程语言来操作HBase中的数据，和Hive类似，本质最终也是编译成MapReduce Job来处理HBase表数据，适合做数据统计</li>
<li>Hive，当前Hive的Release版本尚没有加入对HBase的支持，但在下一个版本Hive 0.7.0中将会支持HBase，可以使用类似SQL语言来访问HBase</li>
</ol>
<p>##七、HBase存储格式</p>
<p>HBase中的所有数据文件都存储在Hadoop HDFS文件系统上，主要包括上述提出的两种文件类型：</p>
<ol>
<li>HFile， HBase中KeyValue数据的存储格式，HFile是Hadoop的二进制格式文件，实际上StoreFile就是对HFile做了轻量级包装，即StoreFile底层就是HFile</li>
<li>HLogFile，HBase中WAL（Write Ahead Log） 的存储格式，物理上是Hadoop的Sequence File</li>
</ol>
<p>##八、HBase应用场景</p>
<p>HBase的优势主要在以下几方面：</p>
<ol>
<li>海量数据存储</li>
<li>快速随机访问</li>
<li>大量写操作的应用</li>
</ol>
<p>常见的应用场景</p>
<ol>
<li>互联网搜索引擎数据存储（BigTable要解决的问题）</li>
<li>审计日志系统</li>
<li>实时系统</li>
<li>消息中心</li>
<li>内容服务系统</li>
</ol>
<p>##参考文档</p>
<ul>
<li><a href="http://www.ymc.ch/en/introduction-to-hbase" target="_blank" rel="external">http://www.ymc.ch/en/introduction-to-hbase</a></li>
<li><a href="http://bigdatariding.blogspot.jp/2013/12/hbase-architecture.html" target="_blank" rel="external">http://bigdatariding.blogspot.jp/2013/12/hbase-architecture.html</a></li>
<li><a href="http://baike.baidu.com/view/1993870.htm" target="_blank" rel="external">http://baike.baidu.com/view/1993870.htm</a></li>
<li><a href="http://hbase.apache.org/" target="_blank" rel="external">http://hbase.apache.org/</a></li>
<li><a href="http://www.alidata.org/archives/1509" target="_blank" rel="external">http://www.alidata.org/archives/1509</a></li>
<li><a href="http://zh.wikipedia.org/zh/Apache_HBase" target="_blank" rel="external">http://zh.wikipedia.org/zh/Apache_HBase</a></li>
<li><a href="http://abloz.com/hbase/book.html" target="_blank" rel="external">http://abloz.com/hbase/book.html</a></li>
</ul>


            <div class="post-info">
    <p class="eof">- EOF -</p>
    <p class="copyright">All rights reserved <a href="http://www.codeinterviews.com">@codeinterviews</a>.</p>
    <p class="link">本文链接：<a href="http://codeinterviews.com/HBase简介/">http://codeinterviews.com/HBase简介/</a></p>
    <div class="share">
        分享本文：
        <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a>
</div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

    </div>
</div>


            
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'disqus_username';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



        </div>
    </div>
</article>

    <footer id="footer">
        <div id="bottom-tip">
            CodeInterviews
        </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/gejiawen/hexadillax2" target="_blank">Hexadillax2</a> 主题</small><br />
        <!--<small>如果你访问github速度过慢，可移步本站的备份站点<a href="http://gejiawen.gitcafe.io">gejiawen.gitcafe.io</a></small><br />-->
        <small>&copy; 2016 <a href="http://codeinterviews.com" target="_blank">CodeInterviews</a>&nbsp;<a href="http://www.miitbeian.gov.cn/" target="_blank">皖ICP备16008778号</a></small>
    </footer>
    
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e4dd778a6204eb51e4f25460e37481ad";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51347904-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>

